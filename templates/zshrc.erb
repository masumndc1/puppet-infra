if [[ -d "$HOME/.oh-my-zsh" ]]; then
    export ZSH="$HOME/.oh-my-zsh"
    source $ZSH/oh-my-zsh.sh
    # export LANG=en_US.UTF-8
else
    sh -c "$(curl -fsSL \
        https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
fi

if [[ -d "$HOME/.fzf-tab" ]]; then
    source $HOME/.fzf-tab/fzf-tab.plugin.zsh
else
    git clone https://github.com/Aloxaf/fzf-tab $HOME/.fzf-tab
fi

if [[ -d "$HOME/.fast-syntax-highlighting" ]]; then
    source $HOME/.fast-syntax-highlighting/fast-syntax-highlighting.plugin.zsh
else
    git clone https://github.com/zdharma-continuum/fast-syntax-highlighting \
        $HOME/.fast-syntax-highlighting
fi

if [[ `uname` == "Linux" ]]; then
   if [[ -f /usr/bin/apt ]]; then
      if [[ ! -f /usr/bin/batcat ]]; then
         sudo apt install -y bat
      fi

      if [[ ! -f /usr/bin/fzf ]]; then
         sudo apt install -y fzf ripgrep
      else
         source /usr/share/doc/fzf/examples/key-bindings.zsh
         source /usr/share/doc/fzf/examples/completion.zsh
         export FZF_DEFAULT_COMMAND='rg --hidden --no-ignore --files -g "!.git/"'
         export FZF_CTRL_T_COMMAND=$FZF_DEFAULT_COMMAND
         export FZF_DEFAULT_OPTS='--height 80% --layout=reverse --border --color=dark'
         alias fp="fzf --preview 'batcat --style=numbers --color=always --line-range :500 {}'"
      fi
   fi
fi

export RUBYOPT='-W0'
alias nvim='/snap/nvim/current/usr/bin/nvim'
